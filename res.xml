<?xml version="1.0"?>
<project name="TrekBuddy - resources" default="rescompile" basedir=".">

    <target name="rescompile">
        <echo>Compiling resources for locale: ${locale}</echo>
        <exec dir="${basedir}" executable="${java.home}/../bin/native2ascii.exe" failonerror="true">
            <arg line="res/resources/language.${locale}.txt tmp/language.ASCII.txt"/>
        </exec>
        <javac 
            destdir="tools/classes" 
            srcdir="tools/src" 
            includes="ResourceCompilerNG.java"/>
        <copy file="tools/src/ignored.properties" todir="tools/classes"/>
        <jar 
            destfile="tools/dist/rc-ng.jar"
            basedir="tools/classes"
            includes="ResourceCompilerNG.class,ignored.properties">
          <manifest>
            <attribute name="Main-Class" value="ResourceCompilerNG"/>
          </manifest>
        </jar> 
        <java fork="true" jar="tools/dist/rc-ng.jar">
            <arg line="${locale} tmp/language.ASCII.txt res/resources/language.${locale}.res"/>
        </java>
        <echo/>
        <echo>************************************************************</echo>
        <echo>*** Locale:   ${locale}</echo>
        <echo>*** Output:   language.${locale}.res</echo>
        <echo>************************************************************</echo>
        <echo/>
    </target>

</project>
